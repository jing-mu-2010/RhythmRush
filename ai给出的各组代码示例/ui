/* ui_sys.c - 界面绘制模块 */
#include "common.h"

// 辅助：画一个简单的背景
void DrawBackground(int colorType) {
    if (colorType == 0) setbkcolor(RGB(30, 60, 30));   // 深绿
    else if (colorType == 1) setbkcolor(RGB(30, 30, 60)); // 深蓝
    else setbkcolor(RGB(60, 30, 30)); // 深红
    cleardevice();
}

void DrawMenu() {
    // 默认背景黑
    setbkcolor(BLACK);
    cleardevice();

    settextstyle(60, 0, "微软雅黑");
    settextcolor(YELLOW);
    outtextxy(200, 100, "极 速 音 浪");

    settextstyle(30, 0, "黑体");
    settextcolor(WHITE);
    
    // 画简单的菜单项
    outtextxy(300, 250, "1. [开始游戏]");
    outtextxy(300, 300, "2. [后台管理]");
    outtextxy(300, 350, "ESC. [退出]");
    
    settextstyle(20, 0, "宋体");
    settextcolor(LIGHTGRAY);
    outtextxy(250, 500, "制作团队：超级无敌C语言六人组");
}

void DrawCharSelect(int currentType) {
    setbkcolor(BLACK);
    cleardevice();

    settextstyle(40, 0, "黑体");
    settextcolor(YELLOW);
    outtextxy(250, 50, "请选择你的英雄");

    // --- 角色 1 ---
    if (currentType == 1) setlinecolor(RED); else setlinecolor(WHITE);
    setfillcolor(BLUE);
    fillrectangle(150, 250, 250, 350);
    rectangle(150, 250, 250, 350);
    outtextxy(150, 360, "1. 经典蓝");

    // --- 角色 2 ---
    if (currentType == 2) setlinecolor(RED); else setlinecolor(WHITE);
    setfillcolor(RED);
    fillcircle(400, 300, 50);
    circle(400, 300, 50);
    outtextxy(350, 360, "2. 烈焰红");

    // --- 角色 3 ---
    if (currentType == 3) setlinecolor(RED); else setlinecolor(WHITE);
    setfillcolor(GREEN);
    fillrectangle(550, 250, 650, 350);
    rectangle(550, 250, 650, 350);
    outtextxy(550, 360, "3. 原谅绿");

    settextstyle(20, 0, "宋体");
    settextcolor(WHITE);
    outtextxy(280, 500, "按 1 / 2 / 3 选择，Enter 确认");
}

void DrawLevelSelect() {
    setbkcolor(BLACK);
    cleardevice();

    settextstyle(40, 0, "黑体");
    settextcolor(WHITE);
    outtextxy(300, 80, "选择难度");

    settextstyle(30, 0, "微软雅黑");
    
    settextcolor(GREEN);
    outtextxy(280, 200, "1. 简单模式 (新手)");
    
    settextcolor(LIGHTBLUE);
    outtextxy(280, 300, "2. 普通模式 (进阶)");
    
    settextcolor(RED);
    outtextxy(280, 400, "3. 困难模式 (地狱)");
}

void DrawManager(GameConfig* head) {
    setbkcolor(BLACK);
    cleardevice();

    settextstyle(40, 0, "黑体");
    settextcolor(YELLOW);
    outtextxy(250, 20, "后台数据管理");

    settextstyle(20, 0, "宋体");
    settextcolor(LIGHTCYAN);
    outtextxy(50, 80, "ID   名称          速度   重力   主题");
    line(50, 105, 750, 105);

    GameConfig* p = head->next;
    int y = 120;
    char buf[200];

    settextcolor(WHITE);
    while (p != NULL) {
        // 主题文字转换
        char* theme = "绿";
        if(p->themeColor == 1) theme = "蓝";
        if(p->themeColor == 2) theme = "红";

        sprintf(buf, "%d    %-12s  %d   %d      %s", 
                p->id, p->name, p->speed, p->gravity, theme);
        outtextxy(50, y, buf);
        y += 30;
        p = p->next;
    }

    settextcolor(LIGHTGRAY);
    outtextxy(50, 550, "[A]新增  [D]删除  [S]保存  [ESC]返回");
}